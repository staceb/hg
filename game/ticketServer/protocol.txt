

// creates a ticket record and returns a ticket code

server.php
?action=sell_ticket
&name=[human name]
&email=[email address]
&reference=[order number]
&tags=[ticket_type]
&security_data=[data]
&security_hash=[md5 hash]

ticket_type can be:

april_9
april_12




// shows download links

server.php
?action=show_downloads
&ticket_id=[ID]



// serve a file

server.php
?action=download
&ticket_id=[ID]
&file_name=[file name]




// gets a user's download code (encrypted)

server.php
?action=get_ticket_id
&email=[email address]


Returned code is encrypted in the following fashion:


  substring( md5( $sharedEncryptionSecret ), 10 ) XOR toHex( ticket_id )


Where toHex converts a ticket ID back to hex with the following mapping:

array( "W", "H", "J", "K", "X", "M", "N", "P", "T", "Y" );
 ==>
array( "0", "1", "2", "3", "4", "5", "6", "7", "8", "9" );


and XOR is a bit-wise XOR on ten pairs of hex-encoded numbers.


Returns DENIED if email not found or user blocked.